name: iOS CI Pipeline

on:
  workflow_dispatch:
  # push:
  #   branches:
  #     - main
  # pull_request:
  #   branches:
  #     main

jobs:
  init:
    runs-on: macos-latest
    steps:
      #- name: checkout code
      #  uses: actions/checkoutcode@v2

      # - name: setup Xcode
      #   run: xcodebuild -version

      - name: set variables
        run: |
          echo "VAR1=valor1" >> $GITHUB_ENV
          echo "VAR2=valor2" >> $GITHUB_ENV

  job2:
    runs-on: ubuntu-latest
    needs: init
    steps:
      - name: Usar variáveis
        run: |
          echo "VAR1 é $VAR1"
          echo "VAR2 é $VAR2"

      # - name: display variables
      #   run: echo "$RUNNER_OS"
       
  ## build da aplicacao ##
  # build:
  #   name: build-ios
  #   needs: [init]
  #   uses: ricardoysh/pipeline-core/.github/workflows/build-ios.yml@main
  # ## escaneamento de cod com sonar ##        
  # sonar:
  #   name: run sonar scan
  #   needs: [build]
  #   uses: ricardoysh/pipeline-core/.github/workflows/sonar-ios.yml@main
  # ## ofuscacao de codigo ##
  # obfuscate:
  #   name: run obfuscate code
  #   needs: [sonar]
  #   uses: ricardoysh/pipeline-core/.github/workflows/obfuscate-ios.yml@main

  # approve:
  #   runs-on: ubuntu-latest
  #   needs: [obfuscate]
  #   steps:
  #     - name: Wait for approval
  #       uses: hmarr/approve-action@v2
  # teste
  
  # releae-app:
  #   name: release ios app
  #   needs: [obfuscate]
  #   uses: ricardoysh/pipeline-core/.github/workflows/release-ios.yml@main
